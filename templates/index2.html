<html>
<head>
<style>

.media-viewer {
    position: fixed; 
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    overflow-x: hidden;
    overflow-y: hidden;
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
}

.media-containers {
    display: flex;
    align-items: center;
    height: 100%;
    width: 100%; /* For backup only */
    --n: 3; /* Number of images - updated with javascript */
    width: calc(var(--n)*100%); /* Make fit all containers */
    --i: 1;
    transform: translate(calc(var(--i, 0)/var(--n)*-100% + var(--tx,0px))); /* Select container */
}

.smooth { 
    transition: transform .5s ease-out; 
}

.media-container {
    min-height: 100%; /* needed so Firefox doesn't make img shrink to fit */
    height: 100%; /* can't take this out either as it breaks Chrome */
    width: 100%; /* can't take this out either as it breaks Chrome */
    width: calc(100%/var(--n)); /* Make each container fit the screen */
}

.media-object-container {
    width: 100%;
    height: calc(100% - 35px);
    text-align: center; /* center content inside div */
}

.media-object {
    max-width: 100%;
    max-height: 100%;
    display: inline-block;
    position: relative;
    top: 50%; /* Center horizontally part 1/2 */
    transform: translateY(-50%); /* Center horizontally part 2/2 */
    pointer-events: none; /* So that mouse events can be captured */
}

.media-caption {
    width: 100%;
    height: 30px;
    margin-top: 5px;
    color: white;
    text-align: center; /* center content inside div */
}

/* Add Animation (when opening) */
.media-viewer {  
    -webkit-animation-name: zoom;
    -webkit-animation-duration: 0.6s;
    animation-name: zoom;
    animation-duration: 0.6s;
}

@-webkit-keyframes zoom {
    from {-webkit-transform:scale(0)} 
    to {-webkit-transform:scale(1)}
}

@keyframes zoom {
    from {transform:scale(0)} 
    to {transform:scale(1)}
}

</style>

<script>

// Globals
var mediaIndex = 0;
var nbrOfMedia = 3;
var mediaContainers = null;

window.onload = function() {

    mediaContainers = document.getElementsByClassName("media-containers")[0];

    mediaContainers.addEventListener('mousemove', drag, false);
    mediaContainers.addEventListener('touchmove', drag, false);

    mediaContainers.addEventListener('mousedown', lock, false);
    mediaContainers.addEventListener('touchstart', lock, false);

    mediaContainers.addEventListener('mouseup', move, false);
    mediaContainers.addEventListener('touchend', move, false);

    document.onkeydown = function(e) {
        var mediaViewer = document.getElementsByClassName("media-viewer")[0];
        e = e || window.event;
        if (e.keyCode == '27') {
            // escape
            if (mediaViewer.style.display == "none") {
                mediaViewer.style.display = "block";
            } else {
                mediaViewer.style.display = "none";
            }
        } else if (e.keyCode == '37') {
            // left arrow
            prevMedia();
        }
        else if (e.keyCode == '39') {
            // right arrow
            nextMedia();
        }
    }
}

function prevMedia() {
    if (mediaIndex > 0) {
        mediaIndex--;
        mediaContainers.style.setProperty("--i", mediaIndex);    
    }
}

function nextMedia() {
    if (mediaIndex < (nbrOfMedia - 1)) {
        mediaIndex++;
        mediaContainers.style.setProperty("--i", mediaIndex);
    }  
}

var x0 = null; // Last mouse/touch x position
var locked = false; // Mouse is down

// Called on mouse/touch down 
function lock(e) { 
    x0 = unify(e).clientX; // Store start x position
    locked = true;
    mediaContainers.classList.toggle('smooth', false);
}

// Called on mouse/touch up 
function move(e) {
  if(locked) {
    let dx = unify(e).clientX - x0;

    mediaContainers.style.setProperty('--tx', '0px');
    mediaContainers.classList.toggle('smooth', true);
    locked = false;
    x0 = null

    if (dx < 0) {
        nextMedia();
    } else if (dx > 0) {
        prevMedia();
    }

  }
}

// Called on mouse/touch drag
function drag(e) { 
    e.preventDefault();
    if(locked)  
        mediaContainers.style.setProperty('--tx', `${Math.round(unify(e).clientX - x0)}px`);
}

function unify(e) { 
    return e.changedTouches ? e.changedTouches[0] : e 
}


</script>

</head>
<body>

this is some stuff in the background
<p>
that shall be invisible
</p>

<div class="media-viewer">
    <div class="media-containers">
        <div class="media-container">
            <div class="media-object-container">
                <img class="media-object" src="/media/jpeg.jpg">
            </div>
            <div class="media-caption">/media/jpeg.jpg</div>
        </div>
        <div class="media-container">
            <div class="media-object-container">
                <img class="media-object" src="/media/png.png">
            </div>
            <div class="media-caption">/media/png.png</div>
        </div>
        <div class="media-container">
            <div class="media-object-container">
                <img class="media-object" src="/media/screenshot_browser.jpg">
            </div>
            <div class="media-caption">/media/screenshot_browser.jpg</div>
        </div><!--
        <div class="media-container">
            <div class="media-object-container">
                <img class="media-object" src="/media/jpeg_rotated.jpg">
            </div>
            <div class="media-caption">/media/jpeg_rotated.jpg</div>
        </div>-->
    </div>
</div>
</body>
</html>